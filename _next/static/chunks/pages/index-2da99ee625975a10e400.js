(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{2853:function(e){class t{constructor({version:e="v1",inferenceInterval:t=1e4,inferenceCallback:n,captureCallback:s}){this.version=e,this.snapshotInterval=200,this.inferenceInterval=t,this.captureCallback=s,this.inferenceCallback=n,this.snapshots=[],this.currentSnapshot={},this.mouseOverWindow=!0,this.mouseClientX,this.mouseClientY,this.eventListeners=[],this.addEventListener("mousemove",this.updateMousePosition.bind(this)),this.timeStampOffset=0,this.timeLeft=0,this.history=[],this.startListening(),this.startCaptureLoop(),this.active=!0,this.startInferenceLoop(),this.loadModel()}addEventListener(e,t){this.eventListeners.push({event:e,function:t.bind(this)}),document.addEventListener(e,t)}deactivate(){for(let e=0;e<this.eventListeners.length;e++)document.removeEventListener(this.eventListeners[e].event,this.eventListeners[e].function);this.stopCaptureLoop(),this.stopInferenceLoop(),this.active=!1}generateNewSnapshot(){return Object.assign({},{alpha:[],space:[],number:[],enter:[],tab:[],arrow:[],back:[],symbol:[],scrolls:[],mousemoves:[],clicks:[],borderCrosses:[],interval:this.snapshotInterval,timeGone:0,docLength:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),width:window.innerWidth,height:window.innerHeight,scrollY:window.scrollY,mouseX:this.mouseClientX,mouseY:this.mouseClientY,mouseOverWindow:this.mouseOverWindow,creationTime:new Date})}setTimeStampOffset(e){0==this.timeStampOffset&&(this.timeStampOffset=e.timeStamp)}updateMousePosition(e){this.mouseClientX=e.clientX,this.mouseClientY=e.clientY}handleClick(e){if(this.captureLoop){this.setTimeStampOffset(e);const t=e.timeStamp-this.timeStampOffset;this.currentSnapshot.clicks.push({clientX:e.clientX,clientY:e.clientY,timeStamp:t})}}handleScroll(e){if(this.captureLoop){this.setTimeStampOffset(e);const t=e.timeStamp-this.timeStampOffset;this.currentSnapshot.scrolls.push({position:window.scrollY,timeStamp:t})}}handleKeydown(e){if(this.captureLoop){this.setTimeStampOffset(e);let{key:t}=e;const n=e.timeStamp-this.timeStampOffset;1==t.length&&t.match(/[a-z]/i)?this.currentSnapshot.alpha.push(n):" "==t?this.currentSnapshot.space.push(n):t>="0"&&t<="9"?this.currentSnapshot.number.push(n):"Enter"==t?this.currentSnapshot.enter.push(n):"Tab"==t?this.currentSnapshot.tab.push(n):e.keyCode>=37&&e.keyCode<=40?this.currentSnapshot.arrow.push(n):"Shift"==t||"CapsLock"==t||"Control"==t||"Alt"==t||"Meta"==t||("Backspace"==t?this.currentSnapshot.back.push(n):this.currentSnapshot.symbol.push(n))}}handleMousemove(e){if(this.captureLoop){this.setTimeStampOffset(e);const t=e.timeStamp-this.timeStampOffset;this.currentSnapshot.mousemoves.push({clientX:e.clientX,clientY:e.clientY,timeStamp:t})}}handleMouseleave(e){this.mouseOverWindow=!1,this.captureLoop&&(this.setTimeStampOffset(e),this.currentSnapshot.borderCrosses.push({entering:!1,timeStamp:new Date}))}handleMouseenter(e){this.mouseOverWindow=!0,this.captureLoop&&(this.setTimeStampOffset(e),this.currentSnapshot.borderCrosses.push({entering:!0,timeStamp:new Date}))}handleVisibilityChange(e){if(this.captureLoop)if(this.setTimeStampOffset(e),document.hidden)clearInterval(this.captureLoop),this.enqueueSnapshot(this.currentSnapshot),this.currentSnapshot=this.generateNewSnapshot(),this.timeLeft=new Date;else{const e=new Date-this.timeLeft;this.currentSnapshot=this.generateNewSnapshot(),this.currentSnapshot.timeGone=e,this.startCaptureLoop()}}startListening(){this.addEventListener("keydown",this.handleKeydown.bind(this)),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("scroll",this.handleScroll.bind(this)),this.addEventListener("mouseenter",this.handleMouseenter.bind(this)),this.addEventListener("mouseleave",this.handleMouseleave.bind(this)),this.addEventListener("mousemove",this.handleMousemove.bind(this)),this.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}enqueueSnapshot(e){const t=this.encodeSnapshot(e);this.captureCallback&&this.captureCallback(e,t),this.snapshots.push(t)}startCaptureLoop(){this.captureFunction(),this.captureLoop=setInterval(this.captureFunction.bind(this),this.snapshotInterval)}stopCaptureLoop(){clearInterval(this.captureLoop),this.captureLoop=void 0}captureFunction(){Object.keys(this.currentSnapshot).length>0&&this.enqueueSnapshot(this.currentSnapshot),this.currentSnapshot=this.generateNewSnapshot()}encodeSnapshot(e){let t=[],n=0;for(const m of["alpha","arrow","back","enter","space","symbol","tab","number"])n+=e[m].length;t.push(n),t.push(e.clicks.length);let s=0,i=e.mouseOverWindow,o=e.creationTime.getTime();for(let m of e.borderCrosses)m.entering&&(s+=m.timeStamp.getTime()-o),o=m.timeStamp.getTime(),i=!i;i&&(s+=e.interval+e.creationTime.getTime()-o),t.push(s/e.interval);let a=0;if(e.mousemoves.length>0){let t=e.mouseX||e.mousemoves[0].clientX,n=e.mouseY||e.mousemoves[0].clientY;for(const s of e.mousemoves){const e=s.clientX,i=s.clientY;a+=(r=t,h=e,c=n,l=i,Math.sqrt(Math.pow(r-h,2)+Math.pow(c-l,2))),t=e,n=i}}var r,h,c,l;t.push(a);let p=0,u=e.scrollY;if(e.scrolls.length>0){let t=u;for(const n of e.scrolls){const e=n.position;p+=Math.abs(t-e),t=e}}return t.push(p),t.push(u),t.push(e.timeGone),t}startInferenceLoop(){this.inferenceLoop=setInterval(this.inferenceFunction.bind(this),this.inferenceInterval)}async inferenceFunction(){this.snapshots.length<this.inferenceInterval/this.snapshotInterval&&await this.sleep(this.inferenceInterval-this.snapshots.length*this.snapshotInterval);const e=this.padWithZeros(this.snapshots.slice(this.snapshots.length-Math.round(this.inferenceInterval/this.snapshotInterval)),50),t=new Date;for(;!this.model;){const e=new Date;if(t+this.inferenceInterval-e<1e3)return;await this.sleep(200)}console.log(e);const n=tf.tensor([e],[1,50,7]);n.print();const s=(await this.model.predict(n,{batchSize:1}).array())[0],i=["distracted","engaged","idle","rushed"],o=Math.max(...s);for(let a=0;a<s.length;a++)if(s[a]==o){this.history.push(i[a]),this.inferenceCallback&&this.inferenceCallback(this.history);break}}stopInferenceLoop(){clearInterval(this.inferenceLoop),this.inferenceLoop=void 0}sleep(e){return new Promise((t=>{setTimeout(t,e)}))}async loadModel(){for(;"undefined"===typeof tf;)await this.sleep(200);this.model=await tf.loadLayersModel("https://cdn.jsdelivr.net/gh/blakesanie/UX-AI@latest/site/public/models/v1/model.json")}async testModel(){const e=tf.tensor([]);await this.model.predict(e,{batchSize:1}).array()}padWithZeros(e,t){for(;e.length<t;){let t=[];for(let e=0;e<7;e++)t.push(0);e.push(t)}return e}}try{e.exports=t}catch{}},8474:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return v},default:function(){return g}});var s=n(5893),i=n(9008),o=n(2853),a=n.n(o),r=n(7294),h=n(3403),c=n(4417),l=n(4845),p=n(5365),u=n(5773);(new(n(3787).Converter)).setFlavor("github");var m,d=new(0,n(8086).Parser);function f(e){var t=e.children,n=e.open,i=e.value;return(0,s.jsx)(p.ZP,{open:n,enterTouchDelay:0,placement:"top",className:"rounded",title:"".concat(i).concat(1=="".concat(i).length?".0":"","s"),PopperProps:{container:function(){if(document)return document.querySelector("#__next")}},children:t})}var v=!0;function g(e){var t=(0,r.useState)(!1),n=t[0],o=t[1],p=(0,r.useState)(5),v=p[0],g=p[1],b=(0,r.useState)(""),w=b[0],S=b[1],y=(0,r.useState)(!1),L=y[0],x=y[1],k=function(e){x(!1),setTimeout((function(){x(!0),S(e)}),1)};return(0,r.useEffect)((function(){document.addEventListener("copy",(function(e){k("Successfully copied text")}))}),[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.default,{children:[(0,s.jsx)("meta",{name:"title",content:"UX-AI"}),(0,s.jsx)("meta",{name:"description",content:"Enabling websites to evaluate and enhance user experience with Artificial Intelligence. Integrate with your website today."}),(0,s.jsx)("meta",{name:"robots",content:"index, follow"}),(0,s.jsx)("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),(0,s.jsx)("meta",{name:"language",content:"English"}),(0,s.jsx)("meta",{name:"author",content:"Blake Sanie"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("meta",{property:"og:title",content:"UX-AI"}),(0,s.jsx)("meta",{property:"og:image",content:"/uxaiThumb.png"}),(0,s.jsx)("meta",{property:"og:description",content:"Enabling websites to evaluate and enhance user experience with Artificial Intelligence. Integrate with your website today."}),(0,s.jsx)("meta",{property:"og:url",content:"https://uxai.blakesanie.com"}),(0,s.jsx)("meta",{property:"og:image:width",content:"1202"}),(0,s.jsx)("meta",{property:"og:image:height",content:"602"}),(0,s.jsx)("meta",{property:"og:type",content:"website"}),(0,s.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js",children:" "})]}),e.elements.map((function(e,t){if("codeblock"==e.type)return(0,s.jsx)("div",{className:"codeBlock rounded",children:(0,s.jsx)(h.Z1,{style:{},text:e.text,language:e.language.replace("html","markup"),showLineNumbers:!1,wrapLines:!0,theme:h.Nl},t)},e.text);if("demo"==e.type)return(0,s.jsxs)("div",{className:"demo",children:[(0,s.jsx)("p",{children:"UX-AI is ready to run on this page! Activate UX-AI with the button below, or deactivate to adjust the inference interval. Then, try varying your behavior and observe the snackbar that appears in the lower-right corner."}),(0,s.jsx)("p",{className:"label",children:"Make inference every:"}),(0,s.jsx)(l.Z,{value:v,step:.1,ValueLabelComponent:f,min:3,max:10,className:"slider",style:{opacity:n?.2:1,pointerEvents:n?"none":"auto"},valueLabelDisplay:"on",onChange:function(e,t){g(t)}}),(0,s.jsx)(c.Z,{variant:"contained",size:"large",className:"rounded "+(n?"deactivate":"activate"),onClick:function(){n?(m.deactivate(),m=void 0,k("UX-AI Deactivated"),document.querySelector(".MuiTooltip-popper").style.opacity=1):(k("UX-AI Activated"),document.querySelector(".MuiTooltip-popper").style.opacity=.2,m=new(a())({inferenceInterval:1e3*v,inferenceCallback:function(e){k('Latest behavior status: "'.concat(e[e.length-1],'"'))}})),o(!n)},children:"".concat(n?"Deactivate":"Activate"," UX-AI")}),(0,s.jsx)("p",{className:"label",children:"Resulting object instantiation:"}),(0,s.jsx)("div",{className:"codeBlock rounded",children:(0,s.jsx)(h.Z1,{text:"const uxai = new UXAI({\n\tinferenceInterval: ".concat(1e3*v,",\n\tinferenceCallback: history => {\n\t\t// do something\n\t}\n})"),language:"javascript",showLineNumbers:!1,wrapLines:!0,theme:h.Nl})})]},"demo");var i=d.parse(e.text);return(0,s.jsx)(r.Fragment,{children:i},e.text)})),(0,s.jsx)(u.Z,{open:L,onClose:function(){x(!1)},autoHideDuration:2500,message:w,anchorOrigin:{vertical:"bottom",horizontal:"right"}},w)]})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8474)}])}},function(e){e.O(0,[9774,2914,2888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);